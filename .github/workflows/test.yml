name: Push to Gitee Debug

on:
  workflow_dispatch:

jobs:
  push:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show Git info
        run: |
          echo "=== 当前分支状态 ==="
          git branch -a
          git status
          echo "=== 最近提交 ==="
          git log -3 --oneline

      - name: Add Gitee remote (with Token)
        run: |
          echo "=== 添加 Gitee 远程仓库 ==="
          # ⚠️ 在这里替换 <YOUR_TOKEN> 为真实的 Gitee Token（不要尖括号）
          git remote add gitee https://yvor_liu:321e50c481fc252d4b5dab71bfb1aa45@gitee.com/yvor_liu/tvbox.git

      - name: Debug remote URL
        run: |
          echo "=== 打印远程仓库配置 ==="
          git remote -v

      - name: Push to Gitee (main -> master)
        run: |
          echo "=== 开始推送到 Gitee ==="
          GIT_TERMINAL_PROMPT=0 git push gitee HEAD:master --force
